<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <!-- Required Stylesheets -->
    <link rel="stylesheet" type="text/css" href="assets/style.css"/>
    <link rel="stylesheet" type="text/css" href="assets/fontawesome.min.css"/>
    <link rel="stylesheet" type="text/css" href="assets/brands.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/bootstrap.5.1.3.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/bootstrap-vue.2.21.2.min.css"/>

    <!-- Required scripts -->
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
    <!-- <script src="assets/vue.2.6.14.min.js"></script> -->
    <script src="assets/bootstrap-vue.2.21.2.min.js"></script>

    <!-- Vue component templates -->
    <script type="text/x-template" id="schema-item">
        <b-card no-body class="border-0">
          <b-card-body class="pb-0">
            <!-- ITEM TITLE -->
            <b-card-title>
              <small>
                <span class="item-line"></span>
                <span v-if="'title' in item">
                  <u>{{item.title}}</u>
                </span>
                <span v-else>
                  <u>{{name}}</u>
                </span>
              </small>
              <small>
                <span v-if="'type' in item">
                  <span v-if="Array.isArray(item.type)">
                    <span v-for="tp in item.type">
                      <span :style="'background-color:'+type_colors[tp]+';'" class="type-indicator mfont" :id="name+'-'+tp" v-b-tooltip.hover.righttop="'type: '+tp">{{type_icons[tp]}}</span>&nbsp;
                    </span>
                  </span>
                  <span v-else :style="'background-color:'+type_colors[item.type]+';'" class="type-indicator mfont" :id="name+'-'+item.type" v-b-tooltip.hover.righttop="'type: '+item.type">{{type_icons[item.type]}}</span>
                </span>
                <span v-if="'$ref' in item" :style="'background-color:'+type_colors['$ref']+';'" class="type-indicator mfont" :id="name+'-ref'" v-b-tooltip.hover.righttop="'type: $ref'">{{type_icons['$ref']}}</span>
                <span v-if="requireditems && requireditems.indexOf(name) >= 0" class="type-indicator-required mfont">
                  required</span>
                <span v-else class="type-indicator-optional mfont">
                  [optional]</span>
              </small>
            </b-card-title>
            <!-- ITEM ANNOTATIONS -->
            <b-card-text class="mb-1 sfont">
              <b-container style="padding-left: 0;">
                <b-row>
                  <b-col cols="6">
                    <b-container style="padding-left: 0;">
                      <span v-for="kw in defaults.schema_keywords.concat(defaults.instance_keywords).concat(defaults.schema_annotations).concat(defaults.additional_keywords)">
                        <b-row  v-if="kw in item">
                          <b-col cols="3"><strong>{{kw}}:</strong></b-col>
                          <b-col>{{item[kw]}}</b-col>
                        </b-row>
                      </span>
                      <span v-if="(Array.isArray(item.type) ? item.type : [item.type]).indexOf('array') >= 0">
                        <b-row>
                          <b-col cols="3"><strong>Array Item Type:</strong></b-col>
                          <b-col>{{item[kw]}}</b-col>
                        </b-row>
                      </span>
                    </b-container>
                  </b-col>
                  <b-col>
                    <span v-if="'type' in item && hasvalidations">
                      <em>Validations:</em>
                      <span v-for="tp in (Array.isArray(item.type) ? item.type : [item.type])">
                        <span v-for="(kw, index) in Object.keys(defaults.validation_keywords[tp])">
                          <span v-if="kw in item" class="validation-text">{{kw}}: {{item[kw]}}</span>
                        </span>
                      </span>
                    </span>
                  </b-col>
                </b-row>
              </b-container>
            </b-card-text>
            <!-- OBJECT ITEM: PROPERTIES -->
            <b-card-text>
              <span v-if="(Array.isArray(item.type) ? item.type : [item.type]).indexOf('object') >= 0">
                <b-button size="sm" class="pt-0 pb-0" variant="outline-secondary" v-b-toggle="name+'-props'">Properties</b-button>
                <b-collapse :id="name+'-props'">
                  <b-card no-body border-variant="default">
                    <schema-item v-for="key in Object.keys(item.properties)" :name="key" :item="item.properties[key]" :defaults="defaults" :requireditems="item.required"></schema-item>
                  </b-card>
                </b-collapse>
              </span>
              <!-- ARRAY ITEM: DETAILS -->
              <span v-if="(Array.isArray(item.type) ? item.type : [item.type]).indexOf('array') >= 0">
                <span v-if="item.items.type == 'object'">
                  <b-button size="sm" class="pt-0 pb-0" variant="outline-secondary" v-b-toggle="name+'items-props'">Array Item Properties</b-button>
                  <b-collapse :id="name+'items-props'">
                    <b-card no-body border-variant="default">
                      <schema-item v-for="key in Object.keys(item.items.properties)" :name="key" :item="item.items.properties[key]" :defaults="defaults" :requireditems="item.items.required"></schema-item>
                    </b-card>
                  </b-collapse>
                </span>
              </span>
            </b-card-text>
          </b-card-body>
        </b-card>
    </script>
  </head>

  <!-- ### -->
  <!-- ### -->
  <!-- ### -->
  <!-- Our application root element -->
  <body>
    <b-container id="vue_app">
      <b-card no-body border-variant="dark">
        <b-card-body>
          <b-card-title>
            <u>Schema: {{schema.title}}</u>
          </b-card-title>
          <b-card-text class="mb-1">
            <b-container style="padding-left: 0;">
              <b-row>
                <b-col cols="6">
                  <b-container style="padding-left: 0;">
                    <span v-for="kw in defaults.schema_keywords.concat(defaults.instance_keywords).concat(defaults.schema_annotations).concat(defaults.additional_keywords)">
                      <b-row  v-if="kw in schema">
                        <b-col cols="3"><strong>{{kw}}:</strong></b-col>
                        <b-col>{{schema[kw]}}</b-col>
                      </b-row>
                    </span>
                  </b-container>
                </b-col>
                <b-col>
                </b-col>
              </b-row>
            </b-container>
          </b-card-text>
          <b-card-text>
            <span v-if="schema.type == 'object'">
              <b-button size="sm" class="pt-0 pb-0" variant="outline-secondary" v-b-toggle="'schema-props'">Properties</b-button>
              <b-collapse id="schema-props">
                <b-card no-body border-variant="default">
                  <schema-item v-for="key in Object.keys(schema.properties)" :name="key" :item="schema.properties[key]" :defaults="defaults" :requireditems="schema.required"></schema-item>
                </b-card>
              </b-collapse>
            </span>
          </b-card-text>
        </b-card-body>
      </b-card>
    </b-container>
    <br><br><br><br>
    <!-- Start running your app -->
    <script src="assets/display_schema.js"></script>
  </body>
</html>
